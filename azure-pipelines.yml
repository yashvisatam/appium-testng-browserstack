trigger:
- main   # or your demo branch

pool:
  vmImage: 'ubuntu-latest'

variables:
  BROWSERSTACK_CONFIG_FILE: 'src/test/resources/conf/capabilities/browserstack-parallel.yml'

steps:
# 1️⃣ BrowserStack setup
- task: BrowserStackConfig@0
  inputs:
    BrowserStackServiceEndPoint: 'browserstack-connection-yashvi'

# 2️⃣ Run TestNG suite in parallel on ONE device
- task: Maven@3
  displayName: 'Run TestNG parallel suite (single device)'
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'clean test'
    options: '-P bstack-parallel'
